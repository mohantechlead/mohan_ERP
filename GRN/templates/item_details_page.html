{% extends 'grn_base.html' %}

{% block content %}
   <div class="form-group pull-left col-sm-12">
        <strong><h4>Item Details</h4></strong>
        <br><br>
      
       <br>
       
       <table class="table table-striped table-bordered">
        <tr>
          <th>PR Number</th>
          <th>Item Name</th>
          <th>Date</th>
          <th>Vendor Name</th>
          <th>Before VAT</th>
          <th>Total Price</th>
          <th>Remaining</th>
       
        </tr>
        {% for order in my_items %}
        <tr>
          <td><a href="#" class="order-link" data-order-id="{{ order.PR_no }}">{{ order.PR_no.PR_no }}</a></td>
          <td>{{ order.item_name }}</td>
          <td>{{ order.PR_no.date }}</td>
          <td>{{ order.PR_no.vendor_name }}</td>
          <td>{{ order.before_vat }}</td>
          <td>{{ order.total_price }}</td>
          <td>{{ order.remaining }}</td>
        
        </tr>
        {% endfor %}
        
      </table>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
          const orderLinks = document.querySelectorAll('.order-link');
          console.log("p1")
          orderLinks.forEach(function (link) {
              link.addEventListener('click', function (event) {
                  event.preventDefault();
                  console.log("p2")
                  const orderID = this.getAttribute('data-order-id');
                  window.location.href = `/GRN/print_pr?PR_no=${orderID}`;
              });
          });
          const orderLinks2 = document.querySelectorAll('.order-link2');
          console.log("p1")
          orderLinks2.forEach(function (link) {
              link.addEventListener('click', function (event) {
                  event.preventDefault();
                  console.log("p2")
                  const orderID = this.getAttribute('data-order-id');
                  window.location.href = `/GRN/print_pr?PR_no=${orderID}`;
              });
          });
      });
    </script>
{% endblock %}
